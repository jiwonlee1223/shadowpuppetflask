# 빠른 시작 가이드 🚀

## 1단계: 필수 파일 준비

먼저 `files/` 폴더에 다음 파일을 추가하세요:

```
files/
├── rabbit reference.png  ← 탐지할 형태의 참조 이미지
└── rabbit bg.mov         ← 오버레이할 비디오 파일
```

> ⚠️ **중요:** 이 파일들이 없으면 애플리케이션이 작동하지 않습니다!

### 참조 이미지 요구사항
- 흰색 배경에 검은색 형태
- PNG 또는 JPG 형식
- 명확한 윤곽선

### 비디오 요구사항
- MOV, MP4 등 OpenCV가 지원하는 형식
- 적절한 해상도 (1920x1080 권장)

## 2단계: 의존성 설치

```bash
pip install -r requirements.txt
```

## 3단계: 서버 실행

```bash
python app.py
```

## 4단계: 브라우저 열기

`http://localhost:5000` 접속

## 5단계: 사용하기

1. **웹캠 권한 허용**
2. **"시작" 버튼 클릭**
3. **참조 이미지와 비슷한 형태를 웹캠에 보여주기**
4. **자동으로 비디오 오버레이 시작!** 🎉
5. **⭐ 3초 이상 유지하면 영구 활성화!**
6. **형태를 치워도 비디오가 계속 재생됩니다!** 🎬
7. **✋ 손으로 토끼 애니메이션을 잡고 드래그!** 🐰
8. **손을 토끼 위에 올리면 "잡음!" 표시 → 드래그 가능!** 📍

## 문제 해결 팁

### 탐지가 안 돼요 😢
- **레벨 조정** 섹션에서:
  - `Input Black`을 30-50으로 올려보세요
  - `Input White`를 200-230으로 낮춰보세요
  - `Gamma`를 1.5-2.0으로 올려보세요

### 탐지가 깜빡여요 💫
- **탐지 설정** 섹션에서:
  - `진입 임계값`을 0.30-0.35로 높여보세요
  - `탈출 임계값`을 0.60-0.70으로 높여보세요

### 조명이 너무 어두워요 🌙
- **레벨 조정**을 사용하여 밝기를 조정하세요
- 또는 실제 조명을 개선하세요

## 고급 설정

### 성능 조정 ⚡

#### 프레임 스킵 설정 (속도 향상)
`static/js/main.js` 파일 상단에서:

```javascript
const FRAME_SKIP = 1;  // 1 = 모든 프레임 처리 (느림)
                        // 2 = 2프레임마다 1번 처리 (2배 빠름)
                        // 3 = 3프레임마다 1번 처리 (3배 빠름)
```

**권장값:**
- 빠른 PC: `FRAME_SKIP = 1`
- 일반 PC: `FRAME_SKIP = 2` ⭐
- 느린 PC: `FRAME_SKIP = 3`

### 웹캠 해상도 변경
`static/js/main.js` 파일의 `initWebcam()` 함수에서:

```javascript
width: { ideal: 640 },   // 원하는 너비 (현재: 640)
height: { ideal: 480 },  // 원하는 높이 (현재: 480)
```

**해상도 옵션:**
- **고품질 (느림):** 1280x720
- **균형 (권장):** 640x480 ⭐
- **빠른 속도:** 320x240

### 히스테리시스 프레임 수 조정
`shape_detector.py` 파일에서:

```python
self.lock_count_enter = 12   # 잠금 진입 필요 프레임 수
self.lock_count_exit = 8     # 잠금 해제 필요 프레임 수
```

### EMA 스무딩 계수 조정
`shape_detector.py` 파일에서:

```python
self.alpha = 0.3          # 일반 스무딩 (낮을수록 부드러움)
self.alpha_frame = 0.5    # 프레임 중심 스무딩
```

## 개발 모드

Flask 디버그 모드는 기본적으로 활성화되어 있습니다. 코드 변경 시 자동으로 재시작됩니다.

## 포트 변경

기본 포트는 5000입니다. 변경하려면 `app.py` 마지막 줄을:

```python
socketio.run(app, host='0.0.0.0', port=8080, debug=True)
```

## 지원

문제가 발생하면 README.md의 "문제 해결" 섹션을 확인하세요.

---

**즐거운 AR 체험 되세요!** 🎭✨

